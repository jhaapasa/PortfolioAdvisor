# PortfolioAdvisor Environment Configuration
# Copy this file to .env and fill in your values.
# Core paths are passed via CLI: --input-dir, --output-dir

# =============================================================================
# API Keys
# =============================================================================

# OpenAI API key (required for LLM features; stub mode if absent)
OPENAI_API_KEY=

# Polygon.io API key (optional; enables symbol resolution and stock data)
POLYGON_API_KEY=

# =============================================================================
# LLM Configuration
# =============================================================================

# Model name (default: gpt-4o-mini)
OPENAI_MODEL=gpt-4o-mini

# Custom API endpoint (optional, for proxies or alternative providers)
OPENAI_BASE_URL=

# Sampling temperature 0.0-2.0 (default: 0.2)
TEMPERATURE=0.2

# Max output tokens (optional, leave empty for model default)
MAX_TOKENS=

# Request timeout in seconds (default: 60)
REQUEST_TIMEOUT_S=60

# =============================================================================
# Parser Configuration
# =============================================================================

# Max retry attempts on validation errors (default: 2)
PARSER_MAX_RETRIES=2

# Max characters per document before truncation (default: 20000)
PARSER_MAX_DOC_CHARS=20000

# =============================================================================
# Symbol Resolution (Polygon.io)
# =============================================================================

# Polygon API base URL override (optional)
POLYGON_BASE_URL=

# HTTP timeout in seconds (default: 10)
POLYGON_TIMEOUT_S=10

# Default market locale when provider does not specify (default: us)
RESOLVER_DEFAULT_LOCALE=us

# Preferred exchange MICs for ranking, comma-separated (default: XNAS,XNYS,ARCX)
RESOLVER_PREFERRED_MICS=XNAS,XNYS,ARCX

# Confidence threshold 0.0-1.0; below this treated as unresolved (default: 0.6)
RESOLVER_CONFIDENCE_THRESHOLD=0.6

# =============================================================================
# Wavelet Analysis
# =============================================================================

# Enable wavelet analysis (default: false)
WAVELET=

# Decomposition level J, 1-8 (default: 5)
WAVELET_LEVEL=5

# =============================================================================
# News Integration
# =============================================================================

# Fetch news articles for stocks (default: true)
FETCH_NEWS=true

# Generate LLM-based 7-day news + technical reports (default: false)
INCLUDE_NEWS_REPORT=

# =============================================================================
# Boundary Stabilization (for trend filters)
# =============================================================================

# Enable boundary extension/stabilization (default: false)
BOUNDARY_EXTENSION=

# Forecasting strategy: linear or gaussian_process (default: linear)
BOUNDARY_STRATEGY=linear

# Lookback period for boundary model in days (default: 30)
BOUNDARY_LOOKBACK=30

# Number of forecast steps for boundary extension (default: 10)
BOUNDARY_STEPS=10

# Enable boundary sanitization (default: false)
BOUNDARY_SANITIZATION=

# Inject noise into boundary extension (default: false)
BOUNDARY_NOISE_INJECTION=

# =============================================================================
# Ollama / Article Text Extraction (Experimental)
# =============================================================================

# Ollama server URL (default: http://localhost:11434)
OLLAMA_BASE_URL=http://localhost:11434

# Request timeout in seconds (default: 120)
OLLAMA_TIMEOUT_S=120

# Model for text extraction (default: milkey/reader-lm-v2:Q8_0)
EXTRACTION_MODEL=milkey/reader-lm-v2:Q8_0

# Articles per extraction batch (default: 10)
EXTRACTION_BATCH_SIZE=10

# Parallel extraction workers (default: 4)
EXTRACTION_MAX_WORKERS=4

# =============================================================================
# Logging
# =============================================================================

# Logging level: DEBUG, INFO, WARNING, ERROR (default: INFO)
LOG_LEVEL=INFO

# Log format: plain or json (default: plain)
LOG_FORMAT=plain

# Enable verbose/debug logs for portfolio_advisor package (default: false)
VERBOSE=

# Show LangGraph agent progress messages (default: false)
AGENT_PROGRESS=

# Allow library logs (httpx, langchain, etc.) at configured level (default: false)
LOG_LIBRARIES=

# =============================================================================
# Caching
# =============================================================================

# Bypass LLM cache lookup but still write results (default: false)
SKIP_LLM_CACHE=

# =============================================================================
# Paths (usually set via CLI, but can be set here)
# =============================================================================

# Override portfolio state directory (defaults to <output_dir>/portfolio)
# PORTFOLIO_DIR=
